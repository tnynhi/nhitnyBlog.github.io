<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Javascript Event Loop - Explained</title><meta name="title" content="Javascript Event Loop - Explained"/><meta name="description" content="Understanding how javascript works under the hood, how it executes our asynchronous javascript code and event loop"/><meta property="og:type" content="website"/><meta property="og:url" content="https://blogs.soumya-jit.tech/"/><meta property="og:title" content="Javascript Event Loop - Explained"/><meta property="og:description" content="Understanding how javascript works under the hood, how it executes our asynchronous javascript code and event loop"/><meta property="og:image" content="https://raw.githubusercontent.com/soumyajit4419/Bits-0f-C0de/main/public/BL-1008/header.png"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:url" content="https://blogs.soumya-jit.tech/"/><meta property="twitter:title" content="Javascript Event Loop - Explained"/><meta property="twitter:description" content="Understanding how javascript works under the hood, how it executes our asynchronous javascript code and event loop"/><meta property="twitter:image" content="https://raw.githubusercontent.com/soumyajit4419/Bits-0f-C0de/main/public/BL-1008/header.png"/><meta name="next-head-count" content="15"/><link rel="preload" href="/nhitnyBlog.github.io/_next/static/css/965a0db3a12e6b00.css" as="style"/><link rel="stylesheet" href="/nhitnyBlog.github.io/_next/static/css/965a0db3a12e6b00.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/nhitnyBlog.github.io/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script id="next-themes-script" src="data:text/javascript;base64,IWZ1bmN0aW9uKCl7dHJ5IHt2YXIgZD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0O2QucmVtb3ZlKCdsaWdodCcsJ2RhcmsnKTt2YXIgZT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKTtpZigic3lzdGVtIj09PWV8fCghZSYmdHJ1ZSkpe3ZhciB0PSIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIixtPXdpbmRvdy5tYXRjaE1lZGlhKHQpO2lmKG0ubWVkaWEhPT10fHxtLm1hdGNoZXMpe2Quc3R5bGUuY29sb3JTY2hlbWUgPSAnZGFyayc7ZC5hZGQoJ2RhcmsnKX1lbHNle2Quc3R5bGUuY29sb3JTY2hlbWUgPSAnbGlnaHQnO2QuYWRkKCdsaWdodCcpfX1lbHNlIGlmKGUpe2QuYWRkKGV8fCAnJyl9aWYoZT09PSdsaWdodCd8fGU9PT0nZGFyaycpZC5zdHlsZS5jb2xvclNjaGVtZT1lfWNhdGNoKGUpe319KCk=" defer="" data-nscript="beforeInteractive"></script><script src="/nhitnyBlog.github.io/_next/static/chunks/webpack-e4b4c144b959acbd.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/main-8732efcc0ea1df31.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/pages/_app-66e90cf73bfde2a7.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/d0447323-be8aded7ec1f7d6a.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/7112840a-f12aa228d7206c01.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/ae51ba48-487ddb5985903e3d.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/1a48c3c1-edc6815270b13a4d.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/d7eeaac4-a2a3e0d9fd25e512.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/7f0c75c1-4f8046040f86aa44.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/95b64a6e-922e1628f4ade49e.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/cccc6244-6b906d0c743c5df2.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/17007de1-f6b4ce2d3b377f50.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/d64684d8-f07001e50ac2ed22.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/1bfc9850-f461b72b11365d2f.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/0c428ae2-91f9205ae2f22b30.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/150-5e90d24e4b474618.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/418-5f3f2da8fe789146.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/chunks/pages/blogs/%5Bid%5D-61d57e2bc42a8262.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/Gdb0BBQya_poivJKtjvWK/_buildManifest.js" defer=""></script><script src="/nhitnyBlog.github.io/_next/static/Gdb0BBQya_poivJKtjvWK/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen relative bg-white dark:bg-gray-900"><header class="fixed w-full border-t-4 bg-white dark:bg-dark border-indigo-600 dark:border-indigo-900 shadow dark:shadow-2 z-50"><div class="container mx-auto px-6 py-5"><div class="flex items-center justify-between"><div class="flex"><a class="flex items-center hover:text-indigo-600 text-gray-800 dark:text-gray-50" href="/nhitnyBlog.github.io"><span class="text-xl font-semibold"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="text-xl" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 14h6v2h-6zM6.293 9.707 8.586 12l-2.293 2.293 1.414 1.414L11.414 12 7.707 8.293z"></path><path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zM4 18V6h16l.002 12H4z"></path></svg></span><span class="mx-1 font-semibold text-base md:text-base">Latest</span></a><div class="dropdown inline-block relative mx-2"><a class="flex items-center hover:text-indigo-600 text-gray-800 dark:text-gray-50 mx-6 cursor-pointer"><span class="text-xl font-semibold"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="text-sm" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M5.375 2.65a2.64 2.64 0 01-2.62 2.65 2.64 2.64 0 01-2.63-2.65A2.64 2.64 0 012.755 0a2.64 2.64 0 012.62 2.65zm0 9.35a2.64 2.64 0 01-2.62 2.65A2.64 2.64 0 01.125 12a2.64 2.64 0 012.63-2.65A2.64 2.64 0 015.375 12zm0 9.35A2.64 2.64 0 012.755 24a2.64 2.64 0 01-2.63-2.65 2.64 2.64 0 012.63-2.65 2.64 2.64 0 012.62 2.65zM11.315 0a2.64 2.64 0 00-2.61 2.65 2.64 2.64 0 002.6 2.65h9.94a2.64 2.64 0 002.63-2.65A2.64 2.64 0 0021.255 0zm-2.61 12a2.64 2.64 0 012.62-2.65h5.68a2.64 2.64 0 012.6 2.65 2.64 2.64 0 01-2.6 2.65h-5.7a2.64 2.64 0 01-2.6-2.65z"></path></svg></span><span class="mx-1 font-semibold text-base md:text-base">Posts</span><span class="text-xl font-semibold"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="text-xl" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M128 192l128 128 128-128z"></path></svg></span></a><ul class="dropdown-menu absolute hidden text-gray-700 pt-1 bg-white dark:bg-dark w-40 pt-6 rounded-xl left-1/3"><li class="cursor-pointer"><a class="rounded-xl bg-white dark:bg-dark text-gray-800 dark:text-gray-50 py-2 px-4 block whitespace-no-wrap">Git</a></li><li class="cursor-pointer"><a class="rounded-xl bg-white dark:bg-dark text-gray-800 dark:text-gray-50 py-2 px-4 block whitespace-no-wrap">React</a></li><li class="cursor-pointer"><a class="rounded-xl bg-white dark:bg-dark text-gray-800 dark:text-gray-50 py-2 px-4 block whitespace-no-wrap">Javascript</a></li></ul></div></div><div class="flex items-center -mx-3"><button class="flex items-center mx-2 lg:mx-4 text-base text-gray-800 hover:text-indigo-600 dark:text-gray-50"><span class="text-lg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 20 20" aria-hidden="true" class="text-xl" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></span></button><a class="flex items-center mx-2 lg:mx-4 text-base text-gray-800 hover:text-indigo-600 dark:text-gray-50" href="/nhitnyBlog.github.io/about"><span class="text-xl"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" class="text-xl" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15 4H21V10H15V4Z" fill="currentColor"></path><path d="M3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12H17C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12H3Z" fill="currentColor"></path><path d="M6 10C7.65685 10 9 8.65685 9 7C9 5.34315 7.65685 4 6 4C4.34315 4 3 5.34315 3 7C3 8.65685 4.34315 10 6 10Z" fill="currentColor"></path></svg></span></a><button class="flex items-center mx-2 lg:mx-4 text-base text-gray-800 hover:text-indigo-600 dark:text-gray-50"><span class="md:flex items-center"><span class="hidden md:block text-sm font-medium"> Sign In</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="text-xl mx-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"></path></svg></span></button></div></div></div></header><div class="py-24"><div class="mx-auto flex justify-center max-w-screen-xl px-6"><div class="rounded-lg shadow-lg bg-white dark:bg-gray-900 pb-8"><img class="object-cover w-full h-72" src="/BL-1008/header.png" alt="Article Image"/><div class="p-4"><div class="flex flex-col items-center"><div class="flex justify-around"><p class="inline-block px-3 ml-3 py-1 mb-4 text-xs font-semibold tracking-wider text-gray-50 uppercase rounded-full bg-indigo-500 dark:bg-indigo-600">Javascript</p><p class="inline-block px-3 ml-3 py-1 mb-4 text-xs font-semibold tracking-wider text-gray-50 uppercase rounded-full bg-indigo-500 dark:bg-indigo-600">Interview</p></div><a class="block mt-2 text-2xl sm:text-4xl font-semibold text-gray-800 dark:text-gray-100">Javascript Event Loop - Explained</a><p class="text-5xl pt-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg></p><article class="prose max-w-xs sm:max-w-sm md:max-w-prose lg:prose-lg py-7 dark:prose-dark "><p>Browser JavaScript execution flow, as well as in Node.js, is based on an event loop. <code>The event loop concept is very simple. There’s an endless loop, where the JavaScript engine waits for tasks, executes them, and then sleeps, waiting for more tasks.</code></p>
<p><code>The event loop is the secret behind JavaScript’s asynchronous programming.</code></p>
<h2 id="Event-Loop-VisualisationBasic-Architecture">Event Loop Visualisation/Basic Architecture</h2>
<p><img src="/BL-1008/eventloop.png" alt="Event Loop"/></p>
<h3 id="Memory-Heap">Memory Heap</h3>
<p>This is where all the memory allocation happens for your variables, that you have defined in your program.</p>
<h3 id="Call-Stack">Call Stack</h3>
<p>This represents the single thread provided for JavaScript code execution. This is where all your javascript code gets pushed and executed one by one as the interpreter reads your program, and gets popped out once the execution is done. It is responsible for keeping track of all the operations in line to be executed. Whenever a function is finished, it is popped from the stack.</p>
<h3 id="Browser-or-Web-APIs">Browser or Web APIs</h3>
<p>They are built into your web browser and are able to expose data from the browser and surrounding computer environment and do useful complex things with it. They are not part of the JavaScript language itself, rather they are built on top of the core JavaScript language, providing you with extra superpowers to use in your JavaScript code.</p>
<p>For example, the Geolocation API provides some simple JavaScript constructs for retrieving location data so you can say, plot your location on a Google Map. In the background, the browser is actually using some complex lower-level code (e.g. C++) to communicate with the device’s GPS hardware (or whatever is available to determine position data), retrieve position data, and return it to the browser environment to use in your code. But again, this complexity is abstracted away from you by the API.</p>
<p><strong>Common browser APIs</strong></p>
<ul>
<li>APIs for manipulating documents</li>
<li>APIs that fetch data from the server</li>
<li>Audio and Video APIs</li>
<li>Client-side storage APIs</li>
</ul>
<h3 id="Event-or-Callback-Queue">Event or Callback Queue</h3>
<p>This is where your asynchronous code gets pushed to, and waits for the execution.</p>
<h3 id="Event-Loop">Event Loop</h3>
<p>It has one simple job <code>to monitor the call stack and the callback queue.</code>
It keeps running continuously and checks the Main stack, if it has any frames to execute, if not then it checks Callback queue, if Callback queue has codes to execute then it pops the message from it to the Main Stack for the execution.</p>
<h3 id="Job-Queue-or-Microtask-Queue">Job Queue or Microtask Queue</h3>
<p>Apart from Callback Queue, browsers have introduced one more queue which is “Job Queue”, reserved only for new Promise() functionality. So when you use promises in your code, you add .then() method, which is a callback method. These <code>thenable</code> methods are added to Job Queue once the promise has returned/resolved, and then gets executed.</p>
<h2 id="Execution-of-async-function-in-javascript">Execution of async function in javascript</h2>
<p>Whenever an async function is called, it is sent to a browser API. These are APIs built into the browser.</p>
<p><code>An example of this is the setTimeout method. When a setTimeout operation is processed, it is sent to the corresponding API which waits till the specified time to send this operation back in for processing.</code></p>
<p><code>This operation is then send to the callback queue. Hence, we have a cyclic system for running async operations in JavaScript. The language itself is single-threaded, but the browser APIs act as separate threads.</code></p>
<p>The <code>event loop</code> facilitates this process. It has one simple job <code>to monitor the call stack and the callback queue.</code> If the call stack is empty, the event loop will take the first event from the queue and will push it to the call stack, which effectively runs. If it is not, then the current function call is processed.</p>
<pre><code>const foo = () =&gt; console.log(&quot;First&quot;);
const bar = () =&gt; setTimeout(() =&gt; console.log(&quot;Second&quot;), 500);
const baz = () =&gt; console.log(&quot;Third&quot;);

bar();
foo();
baz();

Output:
First
Third
Second
</code></pre>
<p><img src="/BL-1008/callbackqueue.gif" alt="Callback Queue"/></p>
<h2 id="Why-Job-Queue-or-Microtask-Queue">Why Job Queue or Microtask Queue</h2>
<p>Micro-tasks has high priority in executing callbacks, if event loop tick comes to Micro-tasks, it will execute all the jobs in job queue first until it gets empty, then will move to callback queue.</p>
<ul>
<li>The primary reason for prioritizing the micro-task queue is to improve the user experience.</li>
<li>Micro-tasks include mutation observer callbacks as well as promise callbacks.</li>
</ul>
<p><img src="/BL-1008/microtask.gif" alt="micro-task Queue"/></p>
<p>Example:</p>
<pre><code>console.log(&#x27;Message no. 1: Sync&#x27;);

setTimeout(function() {
   console.log(&#x27;Message no. 2: setTimeout&#x27;);
}, 0);

var promise = new Promise(function(resolve, reject) {
   resolve();
});

promise.then(function(resolve) {
   console.log(&#x27;Message no. 3: 1st Promise&#x27;);
})
.then(function(resolve) {
   console.log(&#x27;Message no. 4: 2nd Promise&#x27;);
});

console.log(&#x27;Message no. 5: Sync&#x27;);

// Message no. 1: Sync
// Message no. 5: Sync
// Message no. 3: 1st Promise
// Message no. 4: 2nd Promise
// Message no. 2: setTimeout
</code></pre>
<p>All <code>thenable</code> callbacks of the promise are called first, then the setTimeout callback is called.</p>
<p><strong>References:</strong></p>
<ul>
<li>
<a href="https://towardsdev.com/event-loop-in-javascript-672c07618dc9" target="_blank">Event Loop</a>
</li>
</ul></article><div class="mt-3"><div class="flex items-center flex-col"><p class="text-5xl pb-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg></p><p class="text-2xl pb-2">Thanks for reading!!!</p><p class="mx-2 font-semibold text-gray-700 dark:text-gray-100">Soumyajit</p><p class="text-sm font-medium leading-4 text-gray-600 dark:text-gray-200">Author</p></div></div></div></div></div><div class="toc ml-auto max-w-sm"><nav class="sticky top-32 overflow-auto toc-inner"><ul><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Event-Loop-VisualisationBasic-Architecture">Event Loop Visualisation/Basic Architecture</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:1rem;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Memory-Heap">Memory Heap</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:1rem;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Call-Stack">Call Stack</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:1rem;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Browser-or-Web-APIs">Browser or Web APIs</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:1rem;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Event-or-Callback-Queue">Event or Callback Queue</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:1rem;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Event-Loop">Event Loop</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:1rem;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Job-Queue-or-Microtask-Queue">Job Queue or Microtask Queue</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Execution-of-async-function-in-javascript">Execution of async function in javascript</a></li><li class="mt-4 text-lg text-gray-700 dark:text-gray-400" style="padding-left:;color:"><a href="/nhitnyBlog.github.io/blogs/javascript-event-loop---explained#Why-Job-Queue-or-Microtask-Queue">Why Job Queue or Microtask Queue</a></li></ul></nav></div></div><div class="justify-center pt-16 pb-6 flex flex-row items-center"><button><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" style="font-size:2rem" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"></path></svg></button><span style="font-size:1rem;padding-left:16px"></span></div><div class="text-center pb-4"><button class="bg-indigo-500 px-3 py-1 font-semibold text-white inline-flex items-center space-x-2 rounded"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg><a class="twitter-share-button" rel="noopener noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=Javascript Event Loop - Explained by @soumyajit4419
            &amp;url=blogs.soumya-jit.tech/blogs/javascript-event-loop---explained
            &amp;hashtags=Javascript,Interview">Tweet</a></button></div><div class="flex flex-wrap mb-6 mt-6 mx-auto max-w-screen-md"><div class="relative container p-1 appearance-none label-floating"><form><textarea class="resize-none tracking-wide py-2 px-4 mb-3 leading-relaxed appearance-none block w-full bg-gray-100 border border-gray-100 dark:bg-gray-800 dark:border-gray-800 rounded focus:outline-none focus:bg-white focus:border-gray-300 dark:focus:bg-gray-900 dark:focus:border-gray-700" id="message" type="text" placeholder="What are your thoughts..?" rows="3" style="height:100px"></textarea><div class="text-right"><button class="bg-indigo-500 dark:bg-indigo-600 text-white px-3 py-1.5 rounded text-sm font-semibold mr-5">Reset</button><button class="bg-indigo-500 dark:bg-indigo-600 text-white px-3 py-1.5 rounded text-sm font-semibold">Post</button></div></form></div></div><div class="mx-auto max-w-screen-md"><div class="m-2 md:m-0"></div></div><footer class="absolute w-full -bottom-0"><div class="bg-indigo-600 dark:bg-indigo-900"><div class="container mx-auto py-4 px-5 flex flex-wrap flex-col sm:flex-row"><p class="text-gray-50 text-sm text-center sm:text-left">© <!-- -->2024<!-- --> Bits-Of-C0de —<a href="https://twitter.com/soumyajit4419" rel="noopener noreferrer" class="text-gray-50 ml-1" target="_blank">@Soumyajit</a></p><span class="inline-flex sm:ml-auto sm:mt-0 mt-2 justify-center sm:justify-start"><a class="text-gray-50" href="https://twitter.com/soumyajit4419" rel="noopener noreferrer" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z"></path></svg></a><a class="ml-4 text-gray-50" href="https://github.com/soumyajit4419" rel="noopener noreferrer" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="ml-4 text-gray-50" href="https://www.instagram.com/soumyajit4419/" rel="noopener noreferrer" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"></path></svg></a><a class="ml-4 text-gray-50" href="https://www.linkedin.com/in/soumyajit4419/" rel="noopener noreferrer" target="_blank"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></span></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"Id":1008,"Title":"Javascript Event Loop - Explained","Author":"Soumyajit","Tags":"Javascript Interview","Topic":"Javascript","Abstract":"Understanding how javascript works under the hood, how it executes our asynchronous javascript code and event loop","HeaderImage":"/BL-1008/header.png","isPublished":true},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    code: \"code\",\n    h2: \"h2\",\n    img: \"img\",\n    h3: \"h3\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Browser JavaScript execution flow, as well as in Node.js, is based on an event loop. \", _jsx(_components.code, {\n        children: \"The event loop concept is very simple. There’s an endless loop, where the JavaScript engine waits for tasks, executes them, and then sleeps, waiting for more tasks.\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"The event loop is the secret behind JavaScript’s asynchronous programming.\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"Event-Loop-VisualisationBasic-Architecture\",\n      children: \"Event Loop Visualisation/Basic Architecture\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/BL-1008/eventloop.png\",\n        alt: \"Event Loop\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"Memory-Heap\",\n      children: \"Memory Heap\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This is where all the memory allocation happens for your variables, that you have defined in your program.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"Call-Stack\",\n      children: \"Call Stack\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This represents the single thread provided for JavaScript code execution. This is where all your javascript code gets pushed and executed one by one as the interpreter reads your program, and gets popped out once the execution is done. It is responsible for keeping track of all the operations in line to be executed. Whenever a function is finished, it is popped from the stack.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"Browser-or-Web-APIs\",\n      children: \"Browser or Web APIs\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"They are built into your web browser and are able to expose data from the browser and surrounding computer environment and do useful complex things with it. They are not part of the JavaScript language itself, rather they are built on top of the core JavaScript language, providing you with extra superpowers to use in your JavaScript code.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"For example, the Geolocation API provides some simple JavaScript constructs for retrieving location data so you can say, plot your location on a Google Map. In the background, the browser is actually using some complex lower-level code (e.g. C++) to communicate with the device’s GPS hardware (or whatever is available to determine position data), retrieve position data, and return it to the browser environment to use in your code. But again, this complexity is abstracted away from you by the API.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Common browser APIs\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"APIs for manipulating documents\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"APIs that fetch data from the server\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Audio and Video APIs\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Client-side storage APIs\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"Event-or-Callback-Queue\",\n      children: \"Event or Callback Queue\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This is where your asynchronous code gets pushed to, and waits for the execution.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"Event-Loop\",\n      children: \"Event Loop\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"It has one simple job \", _jsx(_components.code, {\n        children: \"to monitor the call stack and the callback queue.\"\n      }), \"\\r\\nIt keeps running continuously and checks the Main stack, if it has any frames to execute, if not then it checks Callback queue, if Callback queue has codes to execute then it pops the message from it to the Main Stack for the execution.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      id: \"Job-Queue-or-Microtask-Queue\",\n      children: \"Job Queue or Microtask Queue\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Apart from Callback Queue, browsers have introduced one more queue which is “Job Queue”, reserved only for new Promise() functionality. So when you use promises in your code, you add .then() method, which is a callback method. These \", _jsx(_components.code, {\n        children: \"thenable\"\n      }), \" methods are added to Job Queue once the promise has returned/resolved, and then gets executed.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"Execution-of-async-function-in-javascript\",\n      children: \"Execution of async function in javascript\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Whenever an async function is called, it is sent to a browser API. These are APIs built into the browser.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"An example of this is the setTimeout method. When a setTimeout operation is processed, it is sent to the corresponding API which waits till the specified time to send this operation back in for processing.\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"This operation is then send to the callback queue. Hence, we have a cyclic system for running async operations in JavaScript. The language itself is single-threaded, but the browser APIs act as separate threads.\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"event loop\"\n      }), \" facilitates this process. It has one simple job \", _jsx(_components.code, {\n        children: \"to monitor the call stack and the callback queue.\"\n      }), \" If the call stack is empty, the event loop will take the first event from the queue and will push it to the call stack, which effectively runs. If it is not, then the current function call is processed.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"const foo = () =\u003e console.log(\\\"First\\\");\\r\\nconst bar = () =\u003e setTimeout(() =\u003e console.log(\\\"Second\\\"), 500);\\r\\nconst baz = () =\u003e console.log(\\\"Third\\\");\\r\\n\\r\\nbar();\\r\\nfoo();\\r\\nbaz();\\r\\n\\r\\nOutput:\\r\\nFirst\\r\\nThird\\r\\nSecond\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/BL-1008/callbackqueue.gif\",\n        alt: \"Callback Queue\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"Why-Job-Queue-or-Microtask-Queue\",\n      children: \"Why Job Queue or Microtask Queue\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Micro-tasks has high priority in executing callbacks, if event loop tick comes to Micro-tasks, it will execute all the jobs in job queue first until it gets empty, then will move to callback queue.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"The primary reason for prioritizing the micro-task queue is to improve the user experience.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Micro-tasks include mutation observer callbacks as well as promise callbacks.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/BL-1008/microtask.gif\",\n        alt: \"micro-task Queue\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Example:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"console.log('Message no. 1: Sync');\\r\\n\\r\\nsetTimeout(function() {\\r\\n   console.log('Message no. 2: setTimeout');\\r\\n}, 0);\\r\\n\\r\\nvar promise = new Promise(function(resolve, reject) {\\r\\n   resolve();\\r\\n});\\r\\n\\r\\npromise.then(function(resolve) {\\r\\n   console.log('Message no. 3: 1st Promise');\\r\\n})\\r\\n.then(function(resolve) {\\r\\n   console.log('Message no. 4: 2nd Promise');\\r\\n});\\r\\n\\r\\nconsole.log('Message no. 5: Sync');\\r\\n\\r\\n// Message no. 1: Sync\\r\\n// Message no. 5: Sync\\r\\n// Message no. 3: 1st Promise\\r\\n// Message no. 4: 2nd Promise\\r\\n// Message no. 2: setTimeout\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All \", _jsx(_components.code, {\n        children: \"thenable\"\n      }), \" callbacks of the promise are called first, then the setTimeout callback is called.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"References:\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(\"a\", {\n          href: \"https://towardsdev.com/event-loop-in-javascript-672c07618dc9\",\n          target: \"_blank\",\n          children: \"Event Loop\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"Id":1008,"Title":"Javascript Event Loop - Explained","Author":"Soumyajit","Tags":"Javascript Interview","Topic":"Javascript","Abstract":"Understanding how javascript works under the hood, how it executes our asynchronous javascript code and event loop","HeaderImage":"/BL-1008/header.png","isPublished":true}},"id":"javascript-event-loop---explained","headings":[{"text":"Event Loop Visualisation/Basic Architecture","level":2,"id":"Event-Loop-VisualisationBasic-Architecture","uid":1001},{"text":"Memory Heap","level":3,"id":"Memory-Heap","uid":1002},{"text":"Call Stack","level":3,"id":"Call-Stack","uid":1003},{"text":"Browser or Web APIs","level":3,"id":"Browser-or-Web-APIs","uid":1004},{"text":"Event or Callback Queue","level":3,"id":"Event-or-Callback-Queue","uid":1005},{"text":"Event Loop","level":3,"id":"Event-Loop","uid":1006},{"text":"Job Queue or Microtask Queue","level":3,"id":"Job-Queue-or-Microtask-Queue","uid":1007},{"text":"Execution of async function in javascript","level":2,"id":"Execution-of-async-function-in-javascript","uid":1008},{"text":"Why Job Queue or Microtask Queue","level":2,"id":"Why-Job-Queue-or-Microtask-Queue","uid":1009}],"topics":["Git","React","Javascript"]},"__N_SSG":true},"page":"/blogs/[id]","query":{"id":"javascript-event-loop---explained"},"buildId":"Gdb0BBQya_poivJKtjvWK","assetPrefix":"/nhitnyBlog.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>